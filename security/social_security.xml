<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ -->
    <!-- USER GROUPS                                                        -->
    <!-- ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ -->
    
    <!-- ✅ SỬA: Đổi tên group cho khớp với ir.model.access.csv -->
    <record id="group_social_facebook_user" model="res.groups">
        <field name="name">Social Media User</field>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        <field name="comment">Có thể xem và tạo bài đăng trên Facebook</field>
    </record>

    <record id="group_social_facebook_manager" model="res.groups">
        <field name="name">Social Media Manager</field>
        <field name="implied_ids" eval="[(4, ref('group_social_facebook_user'))]"/>
        <field name="comment">Có thể quản lý tất cả cấu hình và tài khoản Facebook</field>
    </record>

    <!-- ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ -->
    <!-- RECORD RULES                                                       -->
    <!-- ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ -->
    
    <!-- Social Account Rules -->
    <record id="social_account_rule_user" model="ir.rule">
        <field name="name">Social Account: User Access</field>
        <field name="model_id" ref="model_social_account"/>
        <field name="domain_force">[('company_id', 'in', company_ids)]</field>
        <field name="groups" eval="[(4, ref('group_social_facebook_user'))]"/>
    </record>

    <!-- Social Post Rules -->
    <record id="social_post_rule_user" model="ir.rule">
        <field name="name">Social Post: User Access</field>
        <field name="model_id" ref="model_social_post"/>
        <field name="domain_force">[('company_id', 'in', company_ids)]</field>
        <field name="groups" eval="[(4, ref('group_social_facebook_user'))]"/>
    </record>

    <!-- Social Comment Rules -->
    <record id="social_comment_rule_user" model="ir.rule">
        <field name="name">Social Comment: User Access</field>
        <field name="model_id" ref="model_social_comment"/>
        <field name="domain_force">[('company_id', 'in', company_ids)]</field>
        <field name="groups" eval="[(4, ref('group_social_facebook_user'))]"/>
    </record>

    <!-- Social Conversation Rules -->
    <record id="social_conversation_rule_user" model="ir.rule">
        <field name="name">Social Conversation: User Access</field>
        <field name="model_id" ref="model_social_conversation"/>
        <field name="domain_force">[('company_id', 'in', company_ids)]</field>
        <field name="groups" eval="[(4, ref('group_social_facebook_user'))]"/>
    </record>
    
    <!-- Social Message Rules -->
    <record id="social_message_rule_user" model="ir.rule">
        <field name="name">Social Message: User Access</field>
        <field name="model_id" ref="model_social_message"/>
        <field name="domain_force">[('company_id', 'in', company_ids)]</field>
        <field name="groups" eval="[(4, ref('group_social_facebook_user'))]"/>
    </record>

    <!-- Social Chatbot Automation Rules -->
    <record id="social_chatbot_automation_rule_user" model="ir.rule">
        <field name="name">Social Chatbot Automation: User Access</field>
        <field name="model_id" ref="model_social_chatbot_automation"/>
        <field name="domain_force">[('company_id', 'in', company_ids)]</field>
        <field name="groups" eval="[(4, ref('group_social_facebook_user'))]"/>
    </record>

</odoo>