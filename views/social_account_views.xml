<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- ============================================================
         SOCIAL ACCOUNT - LIST VIEW
         ============================================================ -->
    <record id="social_account_view_tree" model="ir.ui.view">
        <field name="name">social.account.list</field>
        <field name="model">social.account</field>
        <field name="arch" type="xml">
            <list string="Facebook Pages" decoration-muted="not active">
                <field name="name"/>
                <field name="facebook_page_id"/>
                <field name="state" widget="badge" decoration-success="state == 'connected'" decoration-danger="state == 'error'" decoration-info="state == 'draft'"/>
                <field name="followers_count"/>
                <field name="likes_count"/>
                <field name="post_count"/>
                <field name="conversation_count"/>
                <field name="last_sync_date"/>
                <field name="last_message_sync_date"/>
                <field name="active" column_invisible="1"/>
            </list>
        </field>
    </record>

    <!-- ============================================================
         SOCIAL ACCOUNT - FORM VIEW (Cáº¬P NHáº¬T Vá»šI NÃšT SYNC CONVERSATIONS)
         ============================================================ -->
    <record id="social_account_view_form" model="ir.ui.view">
        <field name="name">social.account.form</field>
        <field name="model">social.account</field>
        <field name="arch" type="xml">
            <form string="Facebook Page">
                <header>
                    <button name="action_test_connection" type="object" string="Test Connection" class="btn-primary" invisible="state == 'connected'"/>
                    <button name="action_sync_page_info" type="object" string="Sync Page Info" class="btn-secondary" invisible="state != 'connected'"/>
                    <!-- âœ… THÃŠM: NÃšT SYNC CONVERSATIONS -->
                    <button name="action_sync_conversations" type="object" string="ðŸ”„ Sync Conversations" class="btn-primary" invisible="state != 'connected'"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,connected"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_view_posts" type="object" class="oe_stat_button" icon="fa-newspaper-o">
                            <field name="post_count" widget="statinfo" string="Posts"/>
                        </button>
                        <!-- âœ… THÃŠM: NÃšT XEM CONVERSATIONS -->
                        <button name="action_view_conversations" type="object" class="oe_stat_button" icon="fa-comments">
                            <field name="conversation_count" widget="statinfo" string="Conversations"/>
                        </button>
                    </div>
                    <div class="oe_title">
                        <label for="name"/>
                        <h1>
                            <field name="name" placeholder="Enter Facebook Page Name..."/>
                        </h1>
                    </div>
                    <group>
                        <group string="Facebook Information">
                            <field name="platform" readonly="1"/>
                            <field name="facebook_page_id" placeholder="Enter Page ID..."/>
                            <field name="facebook_page_url" widget="url" readonly="1"/>
                            <field name="page_category" readonly="1"/>
                            <field name="company_id" groups="base.group_multi_company"/>
                            <field name="active" widget="boolean_toggle"/>
                        </group>
                        <group string="Statistics">
                            <field name="followers_count" readonly="1"/>
                            <field name="likes_count" readonly="1"/>
                            <field name="page_rating" readonly="1"/>
                            <field name="last_sync_date" readonly="1"/>
                            <field name="last_message_sync_date" readonly="1"/>
                        </group>
                    </group>
                    <group string="Authentication">
                        <group>
                            <field name="access_token" password="True"/>
                        </group>
                        <group>
                            <field name="token_expires_at"/>
                            <field name="is_token_valid"/>
                        </group>
                    </group>
                    <group string="Settings">
                        <group>
                            <field name="auto_sync_comments"/>
                        </group>
                        <group>
                            <field name="auto_sync_messages"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="About" name="about">
                            <field name="page_about" readonly="1"/>
                        </page>
                        <page string="Error Log" name="errors" invisible="not error_message">
                            <field name="error_message" readonly="1"/>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <!-- ============================================================
         SOCIAL ACCOUNT - KANBAN VIEW
         ============================================================ -->
    <record id="social_account_view_kanban" model="ir.ui.view">
        <field name="name">social.account.kanban</field>
        <field name="model">social.account</field>
        <field name="arch" type="xml">
            <kanban>
                <field name="name"/>
                <field name="state"/>
                <field name="followers_count"/>
                <field name="likes_count"/>
                <field name="post_count"/>
                <field name="conversation_count"/>
                <templates>
                    <t t-name="card">
                        <div class="oe_kanban_content">
                            <div class="o_kanban_record_top">
                                <strong class="o_kanban_record_title">
                                    <field name="name"/>
                                </strong>
                            </div>
                            <div class="o_kanban_record_body">
                                <div>Status: <field name="state"/></div>
                                <div><field name="followers_count"/> followers</div>
                                <div><field name="likes_count"/> likes</div>
                                <div><field name="post_count"/> posts</div>
                                <div><field name="conversation_count"/> conversations</div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- ============================================================
         SOCIAL ACCOUNT - SEARCH VIEW
         ============================================================ -->
    <record id="social_account_view_search" model="ir.ui.view">
        <field name="name">social.account.search</field>
        <field name="model">social.account</field>
        <field name="arch" type="xml">
            <search string="Search Facebook Pages">
                <field name="name"/>
                <field name="facebook_page_id"/>
                <field name="state"/>
                <field name="company_id" groups="base.group_multi_company"/>
                <filter string="Connected" name="filter_connected" domain="[('state', '=', 'connected')]"/>
                <filter string="Draft" name="filter_draft" domain="[('state', '=', 'draft')]"/>
                <filter string="Error" name="filter_error" domain="[('state', '=', 'error')]"/>
                <filter string="Active" name="filter_active" domain="[('active', '=', True)]"/>
                <filter string="Group By Status" name="group_state" context="{'group_by': 'state'}"/>
                <filter string="Group By Company" name="group_company" context="{'group_by': 'company_id'}" groups="base.group_multi_company"/>
            </search>
        </field>
    </record>

    <!-- ============================================================
         SOCIAL ACCOUNT - ACTION
         ============================================================ -->
    <record id="action_social_account" model="ir.actions.act_window">
        <field name="name">Facebook Pages</field>
        <field name="res_model">social.account</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="search_view_id" ref="social_account_view_search"/>
        <field name="context">{'search_default_filter_active': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Connect your first Facebook Page!
            </p>
        </field>
    </record>

</odoo>